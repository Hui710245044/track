{"version":3,"sources":["webpack:///webpack/bootstrap e9d6a442aa1da11d5a53","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"express\"","webpack:///external \"axios\"","webpack:///./server/model/track_number.js","webpack:///./server/channel.js","webpack:///./server/redis/index.js","webpack:///external \"sequelize\"","webpack:///./server/redis/queue.js","webpack:///./server/mysql.js","webpack:///./server/mongodb/tracking-list.js","webpack:///external \"mongoose\"","webpack:///./server/redis/track.js","webpack:///./server/log4js.js","webpack:///./server/controller/carrier/17track.js","webpack:///./server/controller/redis.js","webpack:///./server/service/track-number.js","webpack:///./server/service/day-track.js","webpack:///./server/index.js","webpack:///./server/common.js","webpack:///external \"regenerator-runtime\"","webpack:///external \"body-parser\"","webpack:///external \"express-cors\"","webpack:///./server/router.js","webpack:///./server/api/index.js","webpack:///./server/api/users.js","webpack:///./server/api/tracking.js","webpack:///./server/api/update-excel.js","webpack:///./server/controller/excel-to-json.js","webpack:///external \"fs\"","webpack:///external \"node-xlsx\"","webpack:///./server/model/tracking-list.js","webpack:///external \"async-redis\"","webpack:///./server/model/track_tag.js","webpack:///./server/api/excel-name.js","webpack:///./server/mongodb/excel-name-list.js","webpack:///./server/model/excel-name.js","webpack:///./server/api/get-track-info.js","webpack:///./server/controller/track-info.js","webpack:///external \"child_process\"","webpack:///external \"log4js\"","webpack:///./server/controller/carrier/trackingmore.js","webpack:///./server/controller/carrier/aliexpress.js","webpack:///external \"cheerio\"","webpack:///./server/helper/user-agents.js","webpack:///./server/controller/carrier/ahpostwish.js","webpack:///./server/controller/carrier/shunyou.js","webpack:///./server/controller/carrier/yuntrack.js","webpack:///external \"util\"","webpack:///./server/redis/track_queue.js","webpack:///./server/api/erp-post.js","webpack:///./server/controller/test.js","webpack:///./server/controller/api.js","webpack:///external \"worker-nodes\"","webpack:///external \"path\"","webpack:///./server/service/channel-queue.js","webpack:///./server/timer.js","webpack:///external \"node-schedule\""],"names":["trackNumber","sequelize","define","track","type","Sequelize","DataTypes","STRING","channel","is_online","SMALLINT","is_succ","stime","DATE","ptime","etime","from_tag","INTEGER","CN","name","node","spider","DDP","delivered","JY","asyncRedis","require","client","createClient","on","err","console","log","Queue","key","__key","parseInt","redis","incr","del","data","isLockKey","setTime","push","JSON","stringify","sismember","getSetKey","isNotMember","sadd","lpush","getQueueKey","unLockKey","pushFast","rpush","rpop","srem","parse","pop","slen","smembers","host","dialect","operatorsAliases","pool","max","min","acquire","idle","timezone","doc","Tracking","create","then","root","select","tracking","update","$set","options","upsert","error","excelName","page","pageSize","Number","find","count","len","skip","limit","list","total","findTracking","findOne","NEED_TRACK","addNeedTrack","HASH_TRACK_CHANNEL","hget","track_channel_get","DEFAULT_CHANNEL_SPIDER_WORKER","channel_spider_worker_get","worker","hset","channel_spider_worker_set","track_channel_set","log4js","configure","appenders","cheese","filename","categories","default","level","logger","getLogger","trackList","url","method","headers","UserAgents","randomOne","unique","map","num","Promise","succ","fail","axios","res","msg","dat","catch","request_track_result","lpopAsync","promisify","bind","TRACK_LIST","pop_list_promise","llenAsync","llen","get_list_len","lpushAsync","push_list_promise","pop_list_erp_promise","get_list_erp_len","jsonString","push_list_erp_promise","redis_hash","find_channel","hexists","save_to_hash","save_to_list","save_to_list_cainiao","save_to_list_trackmore","redis_erp","item","save_to_erp_list","save_to_erp_hash","queues","pushFastQueue","TrackNumber","findAll","where","tracks","reprocess_tracks","findAndCountAll","offset","track_list","Object","keys","forEach","path","resolve","__dirname","call","startup","process_channel_day_tracks","process_day_tracks","waitProcessTrack","nowtime","now","length","all","label","day","day_queue_data","assign","day_queue_panes","app","express","process","env","HOST","port","PORT","use","cors","allowedOrigins","bodyParser","json","urlencoded","extended","set","router","listen","Array","prototype","nth","Math","ceil","random","result","hash","j","i","elem","global","ms","setTimeout","round","Date","getTime","Router","users","get","req","next","id","params","sendStatus","query","excelId","tracing_list","post","tracking_json","excelToJson","body","send","status","TrackTag","value","trackTag","trackTagId","identify","undefined","excels","stream","base64tostream","content","fs","writeFileSync","workSheetsFromBuffer","xlsx","output","base64","start","indexOf","substr","replace","Buffer","from","obj","titleArr","trackingIndex","identifyIndex","startTimeIndex","endTimeIndex","index","startTime","endTime","startTimeString","endTimeString","isNaN","arr","split","row","info","isSuc","isOnline","trackingSchema","mongoose","Schema","String","Boolean","model","findExcelName","ExcelName","createExcelName","excelNameSchema","get_info","async","aliexpress","track_17","process_track_number","trackIds","push_tracks_queue","isFirst","isSecond","firstTrack","findOneResult","channelJson","platform","is_suc","is_online_length","c","exec","message","newTime","list_len","list_len2","process_current_track_queues","testTrack","isOnlineTime","track_info","toLocaleLowerCase","s","substring","originCountryData","trackinfo","$","cheerio","load","text","Error","get_result","connotNo","TRACK_QUEUE","queue","lpop","pop_track_queue","push_track_queue","unshift","apply","channels","ok","channels_queue","channel_queue","Channels","elements","schedule","scheduleJob","hour","minute"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e9d6a442aa1da11d5a53","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 2\n// module chunks = 0","import sequelize from '../mysql';\nimport Sequelize from 'sequelize';\n\nconst trackNumber = sequelize.define('tracking', {\n    track:{\n        type:Sequelize.DataTypes.STRING\n    },\n    channel :{\n        type:Sequelize.DataTypes.STRING\n    },\n    is_online:{\n        type:Sequelize.DataTypes.SMALLINT\n    },\n    is_succ:{\n        type:Sequelize.DataTypes.SMALLINT\n    },\n    stime:{\n        type:Sequelize.DataTypes.DATE\n    },\n    ptime:{\n        type:Sequelize.DataTypes.DATE\n    },\n    etime:{\n        type:Sequelize.DataTypes.DATE\n    },\n    from_tag:{\n        type:Sequelize.DataTypes.INTEGER\n    },\n});\n\nexport default trackNumber;\n\n\n// WEBPACK FOOTER //\n// ./server/model/track_number.js","export default {\r\n    CN: {\r\n        name: '',\r\n        channel: '',\r\n        node: 11,\r\n        spider: 'cainiao'\r\n    },\r\n    DDP: {\r\n        name: '',\r\n        channel: '',\r\n        node: 2,\r\n        delivered: 'delivered',\r\n        spider: '17track'\r\n    },\r\n    JY: {\r\n        name: '',\r\n        channel: '',\r\n        node: 3,\r\n        delivered: 'delivered',\r\n        spider: 'cainiao'\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./server/channel.js","const asyncRedis = require(\"async-redis\");\r\nconst client = asyncRedis.createClient();\r\n\r\nclient.on(\"error\", function (err) {\r\n    console.log(\"Error \" + err);\r\n});\r\nexport default client;\n\n\n// WEBPACK FOOTER //\n// ./server/redis/index.js","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 6\n// module chunks = 0","import redis from './index';\n\n class Queue {\n    constructor(key){\n        this.__key = key\n    }\n    getSetKey(){\n        return `queue:common:${this.__key}:set`\n    }\n    getQueueKey(){\n        return `queue:common:${this.__key}:queue`\n    }\n\n    async isLockKey(){\n        return parseInt(await redis.incr(`queue:common-lock:${this.__key}`)) > 1;\n    }\n\n    async unLockKey(){\n        await redis.del(`queue:common-lock:${this.__key}`);\n    }\n\n    async push(data){\n        if(await this.isLockKey()){\n            await setTime(200);\n            await this.push(data);\n        }else{\n            data = JSON.stringify(data);\n            let isNotMember = !await redis.sismember(this.getSetKey(), data);\n            if(isNotMember){\n                await redis.sadd(this.getSetKey(), data);\n                await redis.lpush(this.getQueueKey(), data);\n            }\n            await this.unLockKey();\n        }\n    }\n\n    async pushFast(data){\n        if(await this.isLockKey()){\n            await setTime(200);\n            await this.pushFast(data);\n        }else{\n            data = JSON.stringify(data);\n            let isNotMember = !await redis.sismember(this.getSetKey(), data);\n            if(isNotMember){\n                await redis.sadd(this.getSetKey(), data);\n            }\n            await redis.rpush(this.getQueueKey(), data);\n            await this.unLockKey();\n        }\n    }\n\n    async pop(){\n        const data = await redis.rpop(this.getQueueKey());\n        if(data){\n            if(await redis.srem(this.getSetKey(), data)){\n                return JSON.parse(data)\n            }\n            return await this.pop();\n        }else{\n            return false;\n        }\n    }\n    async length(){\n        return await redis.slen(this.getSetKey()) || 0;\n    }\n\n     async elements(){\n        return await redis.smembers(this.getSetKey()) || [];\n     }\n}\n\nexport default Queue;\n\n\n// WEBPACK FOOTER //\n// ./server/redis/queue.js","const Sequelize = require('sequelize');\nconst sequelize = new Sequelize('tracking_number', 'root', '', {\n    host: 'localhost',\n    dialect: 'mysql',\n    operatorsAliases: false,\n\n    pool: {\n        max: 5,\n        min: 0,\n        acquire: 30000,\n        idle: 10000\n    },\n    timezone: '+08:00'\n});\nexport default sequelize;\n\n\n// WEBPACK FOOTER //\n// ./server/mysql.js","\r\nimport Tracking from '../model/tracking-list'\r\n\r\n\r\n// 创建\r\nasync function create(doc){\r\n    console.log(doc);\r\n    Tracking.create(doc).then((root)=>{\r\n        console.log(root);\r\n    });\r\n}\r\n// 更新\r\n\r\nasync function update(doc) {\r\n    let select     = {tracking:doc.tracking};\r\n    let update     = {$set : doc};\r\n    let options    = {upsert : true};\r\n    Tracking.update(select, update, options, function(error){\r\n        if(error) {\r\n            console.log(error);\r\n        } else {\r\n            console.log('update ok!');\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n// 查找\r\nasync function findTracking(data) {\r\n    let {excelName, page, pageSize} = data;\r\n    page = Number(page);\r\n    pageSize = Number(pageSize);\r\n    let len = await Tracking.find({excelName}).count();\r\n    let find = await Tracking.find({excelName}).skip((page-1)*pageSize).limit(pageSize);\r\n    return {\r\n        list: find,\r\n        total: len\r\n    };\r\n}\r\n\r\n// 查找一个\r\nasync function findOne(select) {\r\n    try{\r\n        let find = await Tracking.findOne(select);\r\n        return find;\r\n    }catch (err){\r\n        console.log('查找一个失败')\r\n    }\r\n\r\n}\r\n\r\n\r\nexport {\r\n    findTracking,\r\n    create,\r\n    update,\r\n    findOne\r\n};\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/tracking-list.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 10\n// module chunks = 0","import redis from './index';\n\nconst NEED_TRACK = 'need_track';\n\nexport async function addNeedTrack(track){\n    await redis.sadd(NEED_TRACK, track);\n}\n\nconst HASH_TRACK_CHANNEL = 'hash_track_channel';\nexport async function track_channel_get(track){\n    return await redis.hget(HASH_TRACK_CHANNEL, track)  || \"CN\";\n}\n\nconst DEFAULT_CHANNEL_SPIDER_WORKER = 1;\nexport async function channel_spider_worker_get(channel){\n    return await redis.hget(\"channel_spider_worker\", channel) || DEFAULT_CHANNEL_SPIDER_WORKER;\n}\n\nexport async function channel_spider_worker_set(channel, worker){\n    return await redis.hset(\"channel_spider_worker\", channel, worker);\n}\n\n\nexport async function track_channel_set(track, channel){\n    return await redis.hset(HASH_TRACK_CHANNEL, track, channel);\n}\n\n\n// WEBPACK FOOTER //\n// ./server/redis/track.js","const log4js = require('log4js');\r\nlog4js.configure({\r\n    appenders: {cheese: {type: 'file', filename: `track.log`}},\r\n    categories: {default: {appenders: ['cheese'], level: 'trace'}}\r\n});\r\nconst logger = log4js.getLogger('cheese');\r\nexport default logger\n\n\n// WEBPACK FOOTER //\n// ./server/log4js.js","let axios = require('axios');\r\nimport logger from '../../log4js';\r\nimport UserAgents from '../../helper/user-agents';\r\n\r\n\r\nasync function request_track_result(trackList) {\r\n    let options = {\r\n        url: 'https://t.17track.net/restapi/track',\r\n        method: 'POST',\r\n        headers: {\r\n            'Host': 't.17track.net',\r\n            'Connection': 'close',\r\n            'Pragma': 'no-cache',\r\n            'Cache-Control': 'no-cache',\r\n            'Accept': 'application/json',\r\n            'Origin': 'https://t.17track.net',\r\n            'X-Requested-With': 'XMLHttpRequest',\r\n            'User-Agent': UserAgents.randomOne(),\r\n            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n            'Referer': 'https://t.17track.net/zh-cn',\r\n            'Accept-Encoding': 'gzip, deflate, br',\r\n            'Accept-Language': 'zh-CN,zh;q=0.9 '\r\n        },\r\n        data: {\r\n            \"guid\": \"\", \"data\": trackList.unique().map(track => {\r\n                return {num: track};\r\n            })\r\n        }\r\n    };\r\n    return new Promise((succ, fail) =>{\r\n        axios(options).then(function (res) {\r\n            if(res.data.msg === 'Ok'){\r\n                succ(res.data.dat);\r\n            }else{\r\n                fail(res);\r\n            }\r\n        }).catch(error => {\r\n            fail(error);\r\n        });\r\n    })\r\n}\r\n\r\nexport default request_track_result\n\n\n// WEBPACK FOOTER //\n// ./server/controller/carrier/17track.js","const {promisify} = require('util');\r\nimport client from '../redis/index'\r\n\r\nconst TRACK_LIST = 'track_list';\r\n\r\nfunction redis_hash(track, find_channel){\r\n        client.hexists(\"track_hash\", track, function (err, res) {\r\n            if(err){\r\n                console.log(err);\r\n            }else {\r\n                if(res === 0){\r\n                    console.log(`${track}不在hash中`, res);\r\n                    save_to_hash(track);\r\n\r\n                    save_to_list(track);// 保存到一个平台\r\n                }else {\r\n                    console.log(`${track}已存在`)\r\n                }\r\n            }\r\n        });\r\n}\r\n\r\nfunction save_to_hash(track){\r\n    // 存入hash\r\n    client.hset('track_hash', track, '', (err, res)=>{\r\n        if(err){\r\n            console.log('save_to_hash',err)\r\n        }else {\r\n            console.log(`保存到hash成功${res}`)\r\n        }\r\n    })\r\n}\r\n\r\n\r\nfunction save_to_list(track) {\r\n    // 存入list\r\n    client.rpush(TRACK_LIST, track, (err, res)=>{\r\n        if(err){\r\n            console.log('save_to_list',err)\r\n        }else {\r\n            console.log(`保存到list成功${res}`)\r\n        }\r\n    });\r\n}\r\n\r\nfunction save_to_list_cainiao(track) {\r\n    // 存入list\r\n    client.rpush('track_list_cainiao', track, (err, res)=>{\r\n        if(err){\r\n            console.log('save_to_list',err)\r\n        }else {\r\n            console.log(`保存到list成功${res}`)\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction save_to_list_trackmore(track) {\r\n    // 存入list\r\n    client.rpush('track_list_trackmore', track, (err, res)=>{\r\n        if(err){\r\n            console.log('save_to_list',err)\r\n        }else {\r\n            console.log(`保存到list成功${res}`)\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\nasync function pop_list_promise(){\r\n    const lpopAsync = promisify(client.rpop).bind(client);\r\n    try {\r\n        let res = await lpopAsync(TRACK_LIST);\r\n        console.log(`${res}移出队列`);\r\n        return res;\r\n    }catch (err){\r\n        console.log('shift_list_promise',err);\r\n    }\r\n\r\n}\r\n\r\nasync function get_list_len(){\r\n    const llenAsync = promisify(client.llen).bind(client);\r\n    try{\r\n        let res = await llenAsync(TRACK_LIST);\r\n        console.log(`list长度还有${res}`);\r\n        return res\r\n    }catch (err){\r\n        console.log('get_list_len',err);\r\n    }\r\n}\r\n\r\nasync function push_list_promise(track){\r\n    const lpushAsync = promisify(client.lpush).bind(client);\r\n    try{\r\n        let res = await lpushAsync(TRACK_LIST, track);\r\n        console.log(`${track}重新压入队列， ${res}`)\r\n    }catch (err){\r\n        console.log('push_list_promise',err);\r\n    }\r\n}\r\n\r\n\r\n\r\n// erp 推送\r\nfunction redis_erp(item){\r\n    client.hexists(\"track_erp_hash\", item.tracking, function (err, res) {\r\n        if(err){\r\n            console.log(err)\r\n        }else {\r\n            if(res === 0){\r\n                //save_to_erp_hash(item.tracking);\r\n                let jsonString = JSON.stringify(item);\r\n                console.log(\"test\", jsonString);\r\n                save_to_erp_list(jsonString);\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction save_to_erp_hash(track){\r\n    client.hset('track_erp_hash', track, '', (err, res)=>{\r\n        if(err){\r\n            console.log('save_to_hash',err)\r\n        }else {\r\n            console.log(`保存到hash成功${res}`)\r\n        }\r\n    })\r\n}\r\nfunction save_to_erp_list(item){\r\n    client.rpush('track_erp_list', item, (err, res)=>{\r\n        if(err){\r\n            console.log('save_to_list',err)\r\n        }else {\r\n            console.log(`保存到list成功${res}`)\r\n        }\r\n    });\r\n}\r\nasync function pop_list_erp_promise() {\r\n    const lpopAsync = promisify(client.rpop).bind(client);\r\n    try {\r\n        let res = await lpopAsync('track_erp_list');\r\n        console.log(`${res}移出队列`);\r\n        return res;\r\n    }catch (err){\r\n        console.log('shift_list_promise',err);\r\n    }\r\n}\r\nasync function get_list_erp_len() {\r\n    const llenAsync = promisify(client.llen).bind(client);\r\n    try{\r\n        let res = await llenAsync('track_erp_list');\r\n        console.log(`list长度还有${res}`);\r\n        return res\r\n    }catch (err){\r\n        console.log('get_list_len',err);\r\n    }\r\n}\r\nasync function push_list_erp_promise(track) {\r\n    const lpushAsync = promisify(client.lpush).bind(client);\r\n    try{\r\n\r\n        let jsonString = JSON.stringify(track);\r\n        console.log(\"test\", jsonString);\r\n        let res = await lpushAsync('track_erp_list', jsonString);\r\n        console.log(`${track}重新压入队列， ${res}`)\r\n    }catch (err){\r\n        console.log('push_list_promise',err);\r\n    }\r\n}\r\n\r\nexport {\r\n    save_to_list,\r\n    redis_hash,\r\n    pop_list_promise,\r\n    get_list_len,\r\n    push_list_promise,\r\n    redis_erp,\r\n    pop_list_erp_promise,\r\n    get_list_erp_len,\r\n    push_list_erp_promise\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/controller/redis.js","import TrackNumber from '../model/track_number';\nimport Queue from \"../redis/queue\";\n\nexport async function reprocess_tracks(){\n    const tracks = await TrackNumber.findAll({\n        where:{\n            is_succ:0,\n            is_online:0\n        }\n    });\n    for(let track of tracks){\n        await pushFastQueue(track)\n    }\n}\n\nlet queues = {};\nasync function pushFastQueue(track){\n    if(queues[track.channel]){\n        await queues[track.channel].pushFast(track.track);\n    }else{\n        queues[track.channel] = new Queue(`wait-process-track-${track.channel}`);\n        await pushFastQueue(track);\n    }\n}\n\nexport async function track_list(where = {}, page = 1, pageSize = 20){\n    page = parseInt(page);\n    pageSize = parseInt(pageSize);\n    return await TrackNumber.findAndCountAll({\n        where,\n        limit: pageSize,\n        offset:(page - 1) * pageSize\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./server/service/track-number.js","import TrackNumber from \"../model/track_number\";\nimport Channels from \"../channel\";\nimport Queue from \"../redis/queue\";\nimport WorkerNode from 'worker-nodes';\nimport path from 'path';\n\nexport async function process_day_tracks(){\n    await Object.keys(Channels).forEach(async function(channel){\n        await process_channel_day_tracks(channel);\n    });\n    await startup();\n}\n\nexport async function process_channel_day_tracks(channel){\n    const waitProcessTrack = new Queue(`wait-process-track-${channel}`);\n    const nowtime = now();\n    const tracks = await TrackNumber.findAll({\n        where:{\n            is_succ:0,\n            channel,\n            // stime:{\n            //     '$gt':nowtime\n            // },\n            // ptime:{\n            //     '$gt':nowtime\n            // }\n        }\n    });\n    console.log(`channel :${channel} count : ${tracks.length}`)\n    for(let track of tracks){\n        await waitProcessTrack.push(track.track);\n    }\n}\n\n\nasync function startup(){\n    await Object.keys(Channels).forEach(async channel =>{\n        let worker = new WorkerNode(path.resolve(__dirname,\"../channel-module\"));\n        try{\n            await worker.call(channel, 1);\n        }catch (e) {\n            console.log(e);\n        }\n    });\n}\n\nexport async function day_queue_panes(){\n    return await Promise.all([\n        {label:`2018-4-2`}\n    ].map(async day =>{\n        return Object.assign({},day,await day_queue_data(day.label))\n    }));\n}\n\nexport async function day_queue_data(key){\n    return {};\n}\n\n\n// WEBPACK FOOTER //\n// ./server/service/day-track.js","import './common';\nimport express from 'express'\nimport bodyParser from 'body-parser'\nimport cors from 'express-cors';\nimport router from './router';\nimport './timer';\nconst app = express();\nconst host = process.env.HOST || '0.0.0.0'\nconst port = process.env.PORT || 3000\napp.use(cors({\n    allowedOrigins: [\n        \"localhost:8080\"\n    ]\n}));\n\napp.use(bodyParser.json({limit: '50mb'}));\n//app.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\n\napp.set('port', port)\nrouter(app);\n\n// Listen the server\napp.listen(port, host)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","Array.prototype.randomOne = function(){\n    let len = this.length;\n    const nth = Math.ceil(Math.random() * len) - 1;\n    return this[nth];\n};\n\nArray.prototype.unique = function() {\n    let result = [], hash = {};\n    let j = 0;\n    for (let i = 0, elem; (elem = this[i]) != null; i++) {\n        if (!hash[elem]) {\n            result.push(elem);\n            hash[elem] = true;\n        }\n    }\n    return result;\n};\n\nglobal.setTime = async function(ms){\n    return new　Promise((succ)=>{\n        setTimeout(()=>{succ()}, ms)\n    })\n};\n\nglobal.now = function(){\n    return Math.round(new Date().getTime() / 1000);\n};\n\n\n// WEBPACK FOOTER //\n// ./server/common.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"express-cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-cors\"\n// module id = 21\n// module chunks = 0","\nimport apis from './api';\nimport api from './controller/api';\nexport default function(app){\n    app.use(apis);\n    app.use(api);\n};\n\n\n// WEBPACK FOOTER //\n// ./server/router.js","import { Router } from 'express'\n\nimport users from './users'\nimport tracking from './tracking'\nimport updateExcel from './update-excel'\nimport excelName from './excel-name'\nimport getTrackInfo from './get-track-info'\nimport erpPost from './erp-post'\n\nconst router = Router();\n\n// Add USERS Routes\nrouter.use(users);\nrouter.use(tracking);\nrouter.use(updateExcel);\nrouter.use(excelName);\nrouter.use(getTrackInfo);\nrouter.use(erpPost);\nimport test from \"../controller/test\";\nrouter.use(test);\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","import { Router } from 'express'\n\nconst router = Router();\n\n// Mock Users\nconst users = [\n  { name: 'Alexandre' },\n  { name: 'Pooya' },\n  { name: 'Sébastien' },\n  {name: 'aaa'},\n  {name: 'bbb'}\n]\n\n/* GET users listing. */\nrouter.get('/users', function (req, res, next) {\n  res.json(users)\n})\n\n/* GET user by ID. */\nrouter.get('/users/:id', function (req, res, next) {\n  const id = parseInt(req.params.id)\n  if (id >= 0 && id < users.length) {\n    res.json(users[id])\n  } else {\n    res.sendStatus(404)\n  }\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/users.js","import {Router} from 'express'\r\nimport TrackNumber from '../model/track_number';\r\n\r\nconst router = Router();\r\n\r\n\r\n/* GET tracking listing. */\r\nrouter.get('/tracking-list', async function (req, res, next) {\r\n    const tracks = await TrackNumber.findAll({\r\n        where:{\r\n            from_tag:req.query.excelId\r\n        }\r\n    });\r\n    res.json({list:tracks})\r\n});\r\n\r\n/* GET tracking listing. */\r\nrouter.get('/tracking-list/get-one', async function (req, res, next) {\r\n    console.log(req.query.tracking);\r\n    let tracing_list = await findOne({\r\n        tracking: req.query.tracking,\r\n    });\r\n    res.json(tracing_list)\r\n});\r\n\r\n\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/api/tracking.js","import {Router} from 'express'\r\nimport {excelToJson} from '../controller/excel-to-json';\r\nimport {update} from '../mongodb/tracking-list';\r\nimport {addNeedTrack} from '../redis/track'\r\nimport channelJson from '../channel'\r\nimport TrackNumber from '../model/track_number';\r\nimport TrackTag from '../model/track_tag';\r\n\r\nconst router = Router();\r\n\r\n\r\nrouter.post('/upload/track/excel', async function (req, res, next) {\r\n    const tracking_json = excelToJson(req.body);\r\n    console.log(tracking_json.data);\r\n    res.send({status: 'success', msg: tracking_json.msg});\r\n    const trackTag = await TrackTag.create({\r\n        type:1,\r\n        value:req.body.name\r\n    });\r\n    const trackTagId = trackTag.id;\r\n    if (tracking_json.status === 1) {\r\n        let result = tracking_json.data;\r\n        for(let i =0; i < result.length; i++){\r\n            let item = result[i];\r\n            if (item.tracking !== 'undefined' && item.identify !== undefined) {\r\n                await TrackNumber.create({\r\n                    from_tag:trackTagId,\r\n                    track:item.tracking,\r\n                    channel:item.identify\r\n                });\r\n                await addNeedTrack(item.tracking);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nrouter.get('/track/excel-list', async function(req, res){\r\n    const excels = await TrackTag.findAll({\r\n        type:1\r\n    });\r\n    res.send(excels);\r\n});\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/update-excel.js","import fs from 'fs';\r\nimport xlsx from 'node-xlsx';\r\n\r\n\r\nexport const excelToJson = (data)=>{\r\n    const stream = base64tostream(data.content);\r\n    fs.writeFileSync(`${__dirname}/${data.name}`, stream);\r\n    let workSheetsFromBuffer = xlsx.parse(`${__dirname}/${data.name}`);\r\n    return output(workSheetsFromBuffer, data.name);\r\n\r\n};\r\nfunction base64tostream(base64){\r\n    const start = base64.indexOf(',');\r\n    let content = base64.substr(start+1);\r\n    content = content.replace(' ', \"+\");\r\n    return Buffer.from(content, 'base64');\r\n}\r\n\r\nfunction output(workSheetsFromBuffer, excelName) {\r\n    let obj =  workSheetsFromBuffer[0];\r\n    if(!(obj instanceof Object) || !(workSheetsFromBuffer[0].data instanceof Array)){\r\n        return {\r\n            status: 0,\r\n            msg: 'Excel有误'\r\n        }\r\n    }\r\n    let titleArr = workSheetsFromBuffer[0].data[0];\r\n    //console.log(\"test\", workSheetsFromBuffer[0].data)\r\n    let trackingIndex = titleArr.indexOf('发货追踪号');\r\n    let identifyIndex = titleArr.indexOf('平台标识');\r\n    let startTimeIndex = titleArr.indexOf('开始查询时间');\r\n    let endTimeIndex = titleArr.indexOf('结束查询时间');\r\n    if(trackingIndex === -1){\r\n        return {\r\n            status: 0,\r\n            msg: '缺少发货追踪号'\r\n        }\r\n    }\r\n    let result = [];\r\n    workSheetsFromBuffer[0].data.forEach((item,index)=>{\r\n        if(index > 0){\r\n            let startTime, endTime;\r\n\r\n            let startTimeString = (!!item[startTimeIndex]) && item[startTimeIndex].replace(/_/g,'/');\r\n            let endTimeString = (!!item[endTimeIndex]) && item[endTimeIndex].replace(/_/g,'/');\r\n            if(!isNaN(new Date(startTimeString).getTime()) && !!(new Date(startTimeString).getTime())){\r\n                startTime = new Date(startTimeString).getTime();\r\n            }else {\r\n                startTime = new Date().getTime();\r\n            }\r\n\r\n            if(!isNaN(new Date(endTimeString).getTime()) && !!(new Date(endTimeString).getTime())){\r\n                endTime = new Date(endTimeString).getTime()\r\n            }else {\r\n                endTime = new Date().getTime() + 2592000000;\r\n            }\r\n            //console.log(typeof item[trackingIndex], item[trackingIndex]);\r\n            let arr =(item[trackingIndex]+'').split(/\\s+/); // excel表有可能一个格里有多个追踪号\r\n\r\n            //console.log(arr);\r\n            result.push(...(arr.map(row=>{\r\n                return {\r\n                    excelName: excelName,\r\n                    tracking:row,\r\n                    identify: item[identifyIndex],\r\n                    startTime: startTime,\r\n                    endTime: endTime,\r\n                    info: {},\r\n                    isSuc:false,\r\n                    isOnline:false\r\n                }\r\n            })))\r\n        }\r\n    });\r\n    return {\r\n        status: 1,\r\n        msg: '上传成功',\r\n        data: result\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/controller/excel-to-json.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"node-xlsx\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-xlsx\"\n// module id = 29\n// module chunks = 0","import mongoose from 'mongoose'\r\nconst trackingSchema = new mongoose.Schema({\r\n    tracking: String,\r\n    identify: String,\r\n    startTime: Number,\r\n    endTime: Number,\r\n    excelName: String,\r\n    info: Object,\r\n    isSuc: Boolean,\r\n    isOnline: Boolean\r\n});\r\n\r\nexport default mongoose.model('Tracking', trackingSchema);\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/model/tracking-list.js","module.exports = require(\"async-redis\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"async-redis\"\n// module id = 31\n// module chunks = 0","import sequelize from '../mysql';\nimport Sequelize from 'sequelize';\n\nconst TrackTag = sequelize.define('tracking_tag', {\n    type:{\n        type:Sequelize.DataTypes.SMALLINT\n    },\n    value:{\n        type:Sequelize.DataTypes.STRING\n    }\n});\n\nexport default TrackTag;\n\n\n// WEBPACK FOOTER //\n// ./server/model/track_tag.js","import { Router } from 'express'\r\nimport {findExcelName} from '../mongodb/excel-name-list'\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/excel-list', async function (req, res, next) {\r\n    let json = await findExcelName();\r\n    res.json(json);\r\n});\r\n\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/api/excel-name.js","import ExcelName from '../model/excel-name'\r\n\r\n\r\n// 创建\r\nasync function createExcelName(doc){\r\n    console.log(doc);\r\n    ExcelName.create(doc).then((root)=>{\r\n        console.log(root);\r\n    });\r\n}\r\n\r\nasync function findExcelName() {\r\n    let find = await ExcelName.find();\r\n    console.log(find);\r\n    return find;\r\n}\r\n\r\nexport {\r\n    createExcelName,\r\n    findExcelName\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/excel-name-list.js","import mongoose from 'mongoose';\r\n\r\nconst excelNameSchema = new mongoose.Schema({\r\n    name: String\r\n});\r\nconst ExcelName = mongoose.model('ExcelName', excelNameSchema);\r\n\r\nexport default ExcelName\n\n\n// WEBPACK FOOTER //\n// ./server/model/excel-name.js","import { Router } from 'express'\r\nimport {get_info} from '../controller/track-info'\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/track/info', async function async (req, res, next) {\r\n    res.json('查询已开启');\r\n\r\n    await get_info(req.query);// 更新到MongoDB\r\n});\r\n\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/api/get-track-info.js","let c = require('child_process');\r\nimport logger from '../log4js';\r\n\r\nimport trackmore from './carrier/trackingmore';\r\nimport aliexpress from './carrier/aliexpress';\r\nimport track_17 from './carrier/17track';\r\nimport ahpostwish from './carrier/ahpostwish';\r\nimport shunyou from './carrier/shunyou';\r\nimport yuntrack from './carrier/yuntrack';\r\nimport channelJson from '../channel';\r\nimport TrackNumber from '../model/track_number';\r\n\r\n\r\nimport {pop_list_promise, get_list_len, push_list_promise} from './redis'\r\nimport {push_tracks_queue} from '../redis/track_queue'\r\nimport {update, findOne} from '../mongodb/tracking-list'\r\n\r\n\r\nfunction setTime(ms) {\r\n    return new Promise((succ, err) => {\r\n        setTimeout(succ, ms);\r\n    })\r\n}\r\n\r\nasync function process_track_number(track,channel){\r\n    if (channel === 'cn') {\r\n        return await aliexpress(track);\r\n    } else {\r\n        return await track_17([track]);\r\n    }\r\n}\r\n\r\n\r\nasync function get_info(query) {\r\n    let where = {};\r\n    if(query.excelId !== undefined){\r\n        where.from_tag = query.excelId;\r\n    }\r\n    where.is_succ = 0;\r\n    const tracks = await TrackNumber.findAll({\r\n        where\r\n    });\r\n    const trackIds = tracks.map(track => track.track);\r\n    await push_tracks_queue(trackIds, query.excelId);\r\n    // 未妥投的跟踪号是否是第一次出现\r\n    let isFirst = true;\r\n    let isSecond = false;\r\n    let firstTrack = '';\r\n\r\n    let track = null;\r\n    while (track = await pop_list_promise()) {\r\n        let findOneResult = await findOne({tracking: track});\r\n\r\n        // 找到对应查询平台信息\r\n        let find_channel = channelJson.find(item => {\r\n            return item.channel === findOneResult.identify\r\n        });\r\n\r\n        if (!find_channel) {\r\n            console.error(`${track} ${findOneResult.identify} channel not defined in channels`);\r\n        }\r\n\r\n        console.log(findOneResult, find_channel);\r\n        if (findOneResult.startTime < (new Date().getTime()) && findOneResult.endTime > (new Date().getTime())) { // 时间范围内\r\n            try {\r\n                await setTime(1000);\r\n                console.log('get_track_info');\r\n\r\n                // 2. 获取追踪信息\r\n                let result = await process_track_number(findOneResult.tracking, find_channel.platform);\r\n                if (result.msg === 'suc') {\r\n                    let is_suc = result.is_suc;\r\n                    let is_online = result.is_online_length >= find_channel.node;\r\n                    // 2.1 成功的话更新到MongoDB数据库\r\n                    update({tracking: track, info: result, isSuc: is_suc, isOnline: is_online});\r\n                    if (!result.is_suc) { // 未投妥，压回队列，等待下次\r\n                        await push_list_promise(track);\r\n                        console.log('未投妥，压回队列');\r\n\r\n                        if (firstTrack === track) {\r\n                            isSecond = true;\r\n                        }\r\n                        if (isFirst) {\r\n                            firstTrack = track;\r\n                            isFirst = false;\r\n                        }\r\n\r\n                    }\r\n                } else {// 出现了错误\r\n                    console.log('请求频繁，压回队列');\r\n\r\n                    // 压回队列\r\n                    await push_list_promise(track);\r\n                    //更换IP查询\r\n                    c.exec('rasdial  /disconnect');\r\n                    await setTime(5000);\r\n                    c.exec('rasdial vpn tb108 1111');\r\n                    await setTime(5000);\r\n\r\n                }\r\n            } catch (err) {\r\n                console.log(`程序出现错误:${err.message}`)\r\n            }\r\n\r\n\r\n        } else { // 不在时间范围内，压回队列，等待下次\r\n            if (findOneResult.endTime < (new Date().getTime())) {// 超时\r\n                console.log('结束时间已到')\r\n            } else {\r\n\r\n                console.log('未到查询时间，压回队列');\r\n                // 增加时间\r\n                let newTime = findOneResult.startTime + 12 * 60 * 60 * 1000;\r\n                if (newTime < findOneResult.endTime) {\r\n                    update({tracking: track, startTime: newTime});\r\n                }\r\n\r\n                await push_list_promise(track);\r\n            }\r\n        }\r\n\r\n        // 5. 重新计算队列长度\r\n        list_len = await get_list_len();\r\n        if (isSecond) {\r\n            list_len = 0;\r\n            isSecond = false;\r\n        }\r\n    }\r\n    let list_len2 = await get_list_len();\r\n    console.log(`remain queue length ${list_len2}`)\r\n\r\n}\r\n\r\nasync function process_current_track_queues(){\r\n    pop_list_promise()\r\n}\r\n\r\nexport {\r\n    get_info\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/controller/track-info.js","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"log4js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"log4js\"\n// module id = 39\n// module chunks = 0","/*\r\n   url:  https://www.trackingmore.com/gettracedetail.php?express=ubi-logistics&tracknumber=4006318016176704\r\n   methods:  get\r\n */\r\n\r\nlet axios = require('axios');\r\n//let c = require('child_process');\r\n\r\nlet testTrack = 'RO590836699CN';\r\n\r\nfunction isSuc(track_info) {\r\n    let jsonString = track_info.toLocaleLowerCase();\r\n    return ((jsonString.indexOf('delivered') !== -1) || (jsonString.indexOf('妥投') !== -1) || (jsonString.indexOf('签收') !== -1))\r\n}\r\nfunction isOnlineTime(track_info) {\r\n\r\n    let s = track_info.substring(2, track_info.length - 1);\r\n\r\n    let json = JSON.parse(s);\r\n\r\n    if (!!json.originCountryData) {\r\n        return json.originCountryData.trackinfo.length\r\n    } else {\r\n        return 0\r\n    }\r\n}\r\n\r\nasync function request_track_result(testTrack){\r\n   try{\r\n       let res = await axios.get(`https://www.trackingmore.com/gettracedetail.php?tracknumber=${testTrack}`);\r\n       let is_suc = isSuc(res.data);\r\n       let is_online_length = isOnlineTime(res.data);\r\n       console.log(\"result\", {\r\n           is_suc,\r\n           is_online_length\r\n       });\r\n       return {\r\n           is_suc,\r\n           is_online_length,\r\n           msg:'suc'\r\n       };\r\n   }catch (err){\r\n      return {\r\n          msg:'err'\r\n      }\r\n   }\r\n\r\n}\r\n\r\nexport default request_track_result\r\n// request_track_result(testTrack);\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/controller/carrier/trackingmore.js","// 速卖通线上发货\r\n\r\n\r\n/**\r\n *  url: https://slw16.global.cainiao.com/trackRefreshRpc/refresh.json?mailNo=RB367740510SG&_=1517989097972\r\n */\r\nlet axios = require('axios');\r\nimport cheerio from 'cheerio';\r\n\r\nasync function request_track_result(track) {\r\n    try {\r\n        let res = await axios.get(`https://slw16.global.cainiao.com/detail.htm?mailNoList=${track}&_=${new Date().getTime()}`);\r\n        let $ = cheerio.load(res.data);\r\n        let {data} = JSON.parse($('#waybill_list_val_box').text());\r\n        console.log(JSON.stringify(data[0]));\r\n        return data[0];\r\n    } catch (err) {\r\n        throw err;\r\n    }\r\n\r\n}\r\n\r\nexport default request_track_result\n\n\n// WEBPACK FOOTER //\n// ./server/controller/carrier/aliexpress.js","module.exports = require(\"cheerio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cheerio\"\n// module id = 42\n// module chunks = 0","export default [\n    \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; AcooBrowser; .NET CLR 1.1.4322; .NET CLR 2.0.50727)\",\n    \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)\",\n    \"Mozilla/4.0 (compatible; MSIE 7.0; AOL 9.5; AOLBuild 4337.35; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)\",\n    \"Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)\",\n    \"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)\",\n    \"Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)\",\n    \"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)\",\n    \"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)\",\n    \"Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6\",\n    \"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1\",\n    \"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0\",\n    \"Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5\",\n    \"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6\",\n    \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11\",\n    \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20\",\n    \"Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52\",\n];\n\n\n// WEBPACK FOOTER //\n// ./server/helper/user-agents.js","// wish邮\r\nlet axios = require('axios');\r\n\r\nfunction request_track_result(trackList) {\r\n    return {\r\n        url: 'https://www.shpostwish.com/apis/tracking/search',\r\n        method: 'POST',\r\n        headers: {\r\n            'Host': 'www.shpostwish.com',\r\n            'Content-Length':21,\r\n            'Connection': 'keep-alive',\r\n            'Pragma': 'no-cache',\r\n            'Cache-Control': 'no-cache',\r\n            'Accept': 'application/json, text/javascript, */*; q=0.01',\r\n            'Origin': 'https://www.shpostwish.com',\r\n            'X-Requested-With': 'XMLHttpRequest',\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.108 Safari/537.36',\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n            'Accept-Encoding': 'gzip, deflate',\r\n            'Accept-Language': 'zh-CN,zh;q=0.9 '\r\n        },\r\n        data:'ids[]='+ trackList\r\n    };\r\n\r\n}\r\n\r\n\r\nasync function get_result(trackList) {\r\n    try {\r\n        let res = await axios(request_track_result(trackList));\r\n        console.log('suc',JSON.stringify(res.data));\r\n        return res.data;\r\n    }catch (err){\r\n        console.log(\"err\", JSON.stringify(err.data));\r\n        return new Error(err.data)\r\n    }\r\n}\r\n\r\n// get_result('12345678900');\r\nexport default get_result;\n\n\n// WEBPACK FOOTER //\n// ./server/controller/carrier/ahpostwish.js","// 顺友\r\n\r\nlet axios = require('axios');\r\n\r\nfunction request_track_result(trackList) {\r\n   return {\r\n        url: 'http://www.sypost.net/query',\r\n        method: 'POST',\r\n        headers: {\r\n            'Host': 'www.sypost.net',\r\n            'Connection': 'close',\r\n            'Pragma': 'no-cache',\r\n            'Cache-Control': 'no-cache',\r\n            'Accept': 'application/json, text/javascript, */*; q=0.01',\r\n            'Origin': 'www.sypost.net',\r\n            'X-Requested-With': 'XMLHttpRequest',\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.108 Safari/537.36',\r\n            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n            'Referer': 'http://www.sypost.net/search?orderNo=' + trackList,\r\n            'Accept-Encoding': 'gzip, deflate',\r\n            'Accept-Language': 'zh-CN,zh;q=0.9 '\r\n        },\r\n        // data:{\r\n        //     'connotNo':'SYUA000180223'\r\n        // },\r\n        params:{\r\n            connotNo:trackList\r\n        }\r\n    };\r\n\r\n}\r\n\r\n\r\nasync function get_result(trackList) {\r\n    try {\r\n      let res = await axios(request_track_result(trackList))\r\n        console.log('suc',JSON.stringify(res.data));\r\n        return res.data\r\n    }catch (err){\r\n        console.log(\"err\", JSON.stringify(err.data));\r\n        return new Error(err.data)\r\n    }\r\n}\r\n\r\n//get_result('SYUA000180223');\r\nexport default get_result;\n\n\n// WEBPACK FOOTER //\n// ./server/controller/carrier/shunyou.js","// 云途 返回html\r\nlet axios = require('axios');\r\n\r\nfunction request_track_result(trackList) {\r\n    return {\r\n        url: 'http://www.yuntrack.com/Track/PartialDetail',\r\n        method: 'POST',\r\n        headers: {\r\n            'Host': 'www.yuntrack.com',\r\n            'Content-Length':27,\r\n            'Connection': 'close',\r\n            'Pragma': 'no-cache',\r\n            'Cache-Control': 'no-cache',\r\n            'Accept': '*/*',\r\n            'Origin': 'http://www.yuntrack.com',\r\n            'X-Requested-With': 'XMLHttpRequest',\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.108 Safari/537.36',\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n            'Referer': 'http://www.yuntrack.com/track/detail?id'+trackList,\r\n            'Accept-Encoding': 'gzip, deflate',\r\n            'Accept-Language': 'zh-CN,zh;q=0.9 '\r\n        },\r\n        data:'numbers[]='+ trackList\r\n    };\r\n\r\n}\r\n\r\n\r\nasync function get_result(trackList) {\r\n    try {\r\n        let res = await axios(request_track_result(trackList));\r\n        console.log('suc',JSON.stringify(res.data));\r\n        return res.data;\r\n    }catch (err){\r\n        console.log(\"err\", JSON.stringify(err.data));\r\n        return new Error(err.data);\r\n    }\r\n}\r\n\r\n// get_result('RL754785561CN');\r\nexport default get_result;\n\n\n// WEBPACK FOOTER //\n// ./server/controller/carrier/yuntrack.js","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 47\n// module chunks = 0","import redis from './index';\n\n/**\n * 未处理的跟踪号队列\n * @type {string}\n */\nconst TRACK_QUEUE = 'track_queue';\n\nexport async function pop_track_queue(queue){\n    return await redis.lpop(`${TRACK_QUEUE}:${queue}`);\n}\n\nexport async function push_track_queue(track, queue){\n    return await redis.lpush(`${TRACK_QUEUE}:${queue}`, track);\n}\n\nexport async function push_tracks_queue(tracks, queue){\n    let key = TRACK_QUEUE;\n    if(queue){\n        key = `${TRACK_QUEUE}:${queue}`;\n    }\n    tracks.unshift(key);\n    await redis.lpush.apply(redis,tracks);\n}\n\n\n// WEBPACK FOOTER //\n// ./server/redis/track_queue.js","// 给erp的api\r\n\r\n\r\nimport { Router } from 'express';\r\nimport {redis_erp} from '../controller/redis';\r\n\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/erp/post', async function (req, res, next) {\r\n    console.log('req.body', req.body);\r\n    req.body && req.body.forEach(item=>{\r\n\r\n        redis_erp(item);\r\n    });\r\n    res.json('推送成功');\r\n\r\n});\r\n\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/api/erp-post.js","import { Router } from 'express';\r\nconst router = Router();\r\n// import request_track_result from './carrier/aliexpress'\r\nimport request_track_result from './carrier/17track'\r\n\r\nrouter.get('/tttt', async function(req,res, next){\r\n    // await request_track_result([\"LP00093893713341\"]);\r\n    await request_track_result([\"MXAHN6032212697YQ\"]);\r\n    res.send('ok');\r\n});\r\nrouter.get('/proxy', async function(req,res, next){\r\n\r\n    res.send('ok');\r\n});\r\n\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./server/controller/test.js","import {Router} from 'express';\n\nconst router = Router();\n\nimport {reprocess_tracks, track_list} from '../service/track-number';\nimport {process_day_tracks, day_queue_panes, day_queue_data} from '../service/day-track';\nimport {channels_queue, channel_queue} from '../service/channel-queue';\nimport Channels from '../channel';\nimport {channel_spider_worker_get, channel_spider_worker_set} from \"../redis/track\";\n\nrouter.get('/track-list', async function (req, res) {\n    let where = {};\n    if(req.query.track){\n        where.track = req.query.track.split(',');\n    }\n    if(req.query.channels) {\n        where.channel = req.query.channels.split(',')\n    }\n    let page = 1;\n    if(req.query.page){\n        page = req.query.page;\n    }\n    let pageSize = 20;\n    if(req.query.pageSize){\n        pageSize = req.query.pageSize;\n    }\n    const result = await track_list(where, page, pageSize);\n    res.json(result)\n});\n\nrouter.get('/reprocess_tracks', async function (req, res) {\n    await reprocess_tracks();\n    res.json({ok: 'ok'})\n});\n\nrouter.get('/process_day_tracks', async function (req, res) {\n    await process_day_tracks();\n    res.json({ok: 'ok'})\n});\n\nrouter.get('/channels-queue', async function (req, res) {\n    const queues = await channels_queue();\n    res.json(queues);\n});\nrouter.get('/channel-queue', async function (req, res) {\n    const queues = await channel_queue(req.query.channel);\n    res.json(queues);\n});\n\nrouter.get('/channels', async function (req, res) {\n    const channels = Object.keys(Channels).map(channel =>{\n        return Object.assign({}, Channels[channel],{channel});\n    });\n    res.json(channels);\n});\n\nrouter.get('/channels-worker', async function (req, res){\n    const channels = await Promise.all(Object.keys(Channels).map(async channel =>{\n        return Object.assign({},Channels[channel],{channel}, {value:await channel_spider_worker_get(channel)})\n    }));\n    res.json(channels);\n});\n\nrouter.post('/channels-worker', async function (req, res) {\n    await req.body.forEach(async({channel,value}) =>{\n        await channel_spider_worker_set(channel, value)\n    });\n    res.json({message:'保存成功'});\n});\n\nrouter.get('/day-queue-panes', async function(req, res){\n    res.json(await day_queue_panes());\n});\n\nrouter.get('/day-queue-data', async function(req, res){\n    const data = await day_queue_data(req.query.day);\n    res.json(data);\n});\n\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./server/controller/api.js","module.exports = require(\"worker-nodes\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"worker-nodes\"\n// module id = 52\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 53\n// module chunks = 0","import Queue from '../redis/queue';\nimport Channels from '../channel';\nexport async function channels_queue(){\n    return await Promise.all(Object.keys(Channels).map(async channel =>{\n        return Object.assign({queues:await channel_queue(channel)}, Channels[channel]);\n    }))\n}\nexport async function channel_queue(channel){\n    let queue = new Queue(`wait-process-track-${channel}`);\n    return await queue.elements();\n}\n\n\n// WEBPACK FOOTER //\n// ./server/service/channel-queue.js","import {process_day_tracks} from \"./service/day-track\";\r\n\r\nconst schedule = require('node-schedule');\r\nimport {reprocess_tracks} from './service/track-number';\r\n\r\n// 定时任务，每天0点0分定时执行\r\nschedule.scheduleJob({hour: 0, minute: 0}, async function () {\r\n    await reprocess_tracks();\r\n});\r\n\r\n\r\nschedule.scheduleJob(\"20 * * * * *\", async function () {\r\n    // await reprocess_tracks();\r\n});\r\n\r\nschedule.scheduleJob(\"30 25 11 * * *\", async function () {\r\n    console.log(`process_day_tracks`);\r\n    process_day_tracks();\r\n});\n\n\n// WEBPACK FOOTER //\n// ./server/timer.js","module.exports = require(\"node-schedule\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-schedule\"\n// module id = 56\n// module chunks = 0"],"sourceRoot":""}